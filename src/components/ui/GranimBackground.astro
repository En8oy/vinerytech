---
// Componente para fondo animado con Granim.js
---

<div class="granim-wrapper">
  <canvas id="granim-canvas"></canvas>
</div>

<style>
  .granim-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  #granim-canvas {
    width: 100%;
    height: 100%;
    display: block;
  }
</style>

<script>
  import Granim from 'granim';

  // Esperar a que el DOM estÃ© listo
  document.addEventListener('DOMContentLoaded', () => {
    const canvas = document.getElementById('granim-canvas');

    if (canvas) {
      console.log('Canvas encontrado, inicializando Granim...');

      try {
        const granimInstance = new Granim({
          element: '#granim-canvas',
          direction: 'diagonal',
          isPausedWhenNotInView: true,
          opacity: [1, 1],
          states: {
            'default-state': {
              gradients: [
                [
                  { color: '#667eea', pos: 0.2 },
                  { color: '#764ba2', pos: 0.8 },
                  { color: '#f093fb', pos: 1 },
                ],
                [
                  { color: '#4facfe', pos: 0 },
                  { color: '#00f2fe', pos: 0.5 },
                  { color: '#43e97b', pos: 1 },
                ],
                [
                  { color: '#fa709a', pos: 0 },
                  { color: '#fee140', pos: 0.5 },
                  { color: '#30cfd0', pos: 1 },
                ],
                [
                  { color: '#a8edea', pos: 0 },
                  { color: '#fed6e3', pos: 0.5 },
                  { color: '#667eea', pos: 1 },
                ],
              ],
              transitionSpeed: 6000,
              loop: true,
            },
          },
        });

        console.log('Granim inicializado exitosamente!', granimInstance);
      } catch (error) {
        console.error('Error al inicializar Granim:', error);
      }
    } else {
      console.error('Canvas no encontrado');
    }
  });
</script>
